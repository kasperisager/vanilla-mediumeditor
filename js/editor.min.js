function MediumEditor(e,t){"use strict";return this.init(e,t)}"object"==typeof module&&(module.exports=MediumEditor),function(e,t){"use strict";function i(e,t){var i;if(void 0===e)return t;for(i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)===!1&&(e[i]=t[i]);return e}function o(){var t,i,o,n=e.getSelection();if(n.getRangeAt&&n.rangeCount){for(o=[],t=0,i=n.rangeCount;i>t;t+=1)o.push(n.getRangeAt(t));return o}return null}function n(t){var i,o,n=e.getSelection();if(t)for(n.removeAllRanges(),i=0,o=t.length;o>i;i+=1)n.addRange(t[i])}function r(){var e=t.getSelection().anchorNode,i=e&&3===e.nodeType?e.parentNode:e;return i}function a(){var i,o,n,r,a="";if(void 0!==e.getSelection){if(o=e.getSelection(),o.rangeCount){for(r=t.createElement("div"),i=0,n=o.rangeCount;n>i;i+=1)r.appendChild(o.getRangeAt(i).cloneContents());a=r.innerHTML}}else void 0!==t.selection&&"Text"===t.selection.type&&(a=t.selection.createRange().htmlText);return a}MediumEditor.prototype={defaults:{allowMultiParagraphSelection:!0,anchorInputPlaceholder:"Paste or type a link",buttons:["bold","italic","underline","anchor","header1","header2","quote"],buttonLabels:!1,delay:0,diffLeft:0,diffTop:-10,disableReturn:!1,disableToolbar:!1,firstHeader:"h3",forcePlainText:!0,placeholder:"Type your text",secondHeader:"h4",targetBlank:!1,anchorPreviewHideDelay:500},isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),init:function(e,o){return this.elements="string"==typeof e?t.querySelectorAll(e):e,1===this.elements.nodeType&&(this.elements=[this.elements]),0!==this.elements.length?(this.isActive=!0,this.parentElements=["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],this.id=t.querySelectorAll(".medium-editor-toolbar").length+1,this.options=i(o,this.defaults),this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions()):void 0},initElements:function(){var e,t=!1;for(e=0;e<this.elements.length;e+=1)this.elements[e].setAttribute("contentEditable",!0),this.elements[e].getAttribute("data-placeholder")||this.elements[e].setAttribute("data-placeholder",this.options.placeholder),this.elements[e].setAttribute("data-medium-element",!0),this.bindParagraphCreation(e).bindReturn(e).bindTab(e).bindAnchorPreview(e),this.options.disableToolbar||this.elements[e].getAttribute("data-disable-toolbar")||(t=!0);return t&&this.initToolbar().bindButtons().bindAnchorForm(),this},serialize:function(){var e,t,i={};for(e=0;e<this.elements.length;e+=1)t=""!==this.elements[e].id?this.elements[e].id:"element-"+e,i[t]={value:this.elements[e].innerHTML.trim()};return i},bindParagraphCreation:function(e){var i=this;return this.elements[e].addEventListener("keyup",function(e){var o,n=r();n&&n.getAttribute("data-medium-element")&&0===n.children.length&&!i.options.disableReturn&&!n.getAttribute("data-disable-return")&&t.execCommand("formatBlock",!1,"p"),13!==e.which||e.shiftKey||(n=r(),o=n.tagName.toLowerCase(),i.options.disableReturn||this.getAttribute("data-disable-return")||"li"===o||i.isListItemChild(n)||(t.execCommand("formatBlock",!1,"p"),"a"===o&&t.execCommand("unlink",!1,null)))}),this},isListItemChild:function(e){for(var t=e.parentNode,i=t.tagName.toLowerCase();-1===this.parentElements.indexOf(i)&&"div"!==i;){if("li"===i)return!0;if(t=t.parentNode,!t||!t.tagName)return!1;i=t.tagName.toLowerCase()}return!1},bindReturn:function(e){var t=this;return this.elements[e].addEventListener("keypress",function(e){13===e.which&&(t.options.disableReturn||this.getAttribute("data-disable-return"))&&e.preventDefault()}),this},bindTab:function(e){return this.elements[e].addEventListener("keydown",function(e){if(9===e.which){var i=r().tagName.toLowerCase();"pre"===i&&(e.preventDefault(),t.execCommand("insertHtml",null,"    "))}}),this},buttonTemplate:function(e){var t=this.getButtonLabels(this.options.buttonLabels),i={bold:'<li><button class="medium-editor-action medium-editor-action-bold" data-action="bold" data-element="b">'+t.bold+"</button></li>",italic:'<li><button class="medium-editor-action medium-editor-action-italic" data-action="italic" data-element="i">'+t.italic+"</button></li>",underline:'<li><button class="medium-editor-action medium-editor-action-underline" data-action="underline" data-element="u">'+t.underline+"</button></li>",strikethrough:'<li><button class="medium-editor-action medium-editor-action-strikethrough" data-action="strikethrough" data-element="strike"><strike>A</strike></button></li>',superscript:'<li><button class="medium-editor-action medium-editor-action-superscript" data-action="superscript" data-element="sup">'+t.superscript+"</button></li>",subscript:'<li><button class="medium-editor-action medium-editor-action-subscript" data-action="subscript" data-element="sub">'+t.subscript+"</button></li>",anchor:'<li><button class="medium-editor-action medium-editor-action-anchor" data-action="anchor" data-element="a">'+t.anchor+"</button></li>",image:'<li><button class="medium-editor-action medium-editor-action-image" data-action="image" data-element="img">'+t.image+"</button></li>",header1:'<li><button class="medium-editor-action medium-editor-action-header1" data-action="append-'+this.options.firstHeader+'" data-element="'+this.options.firstHeader+'">'+t.header1+"</button></li>",header2:'<li><button class="medium-editor-action medium-editor-action-header2" data-action="append-'+this.options.secondHeader+'" data-element="'+this.options.secondHeader+'">'+t.header2+"</button></li>",quote:'<li><button class="medium-editor-action medium-editor-action-quote" data-action="append-blockquote" data-element="blockquote">'+t.quote+"</button></li>",orderedlist:'<li><button class="medium-editor-action medium-editor-action-orderedlist" data-action="insertorderedlist" data-element="ol">'+t.orderedlist+"</button></li>",unorderedlist:'<li><button class="medium-editor-action medium-editor-action-unorderedlist" data-action="insertunorderedlist" data-element="ul">'+t.unorderedlist+"</button></li>",pre:'<li><button class="medium-editor-action medium-editor-action-pre" data-action="append-pre" data-element="pre">'+t.pre+"</button></li>",indent:'<li><button class="medium-editor-action medium-editor-action-indent" data-action="indent" data-element="ul">'+t.indent+"</button></li>",outdent:'<li><button class="medium-editor-action medium-editor-action-outdent" data-action="outdent" data-element="ul">'+t.outdent+"</button></li>"};return i[e]||!1},getButtonLabels:function(e){var t,i,o={bold:"<b>B</b>",italic:"<b><i>I</i></b>",underline:"<b><u>U</u></b>",superscript:"<b>x<sup>1</sup></b>",subscript:"<b>x<sub>1</sup></b>",anchor:"<b>#</b>",image:"<b>image</b>",header1:"<b>H1</b>",header2:"<b>H2</b>",quote:"<b>&ldquo;</b>",orderedlist:"<b>1.</b>",unorderedlist:"<b>&bull;</b>",pre:"<b>0101</b>",indent:"<b>&rarr;</b>",outdent:"<b>&larr;</b>"};if("fontawesome"===e?t={bold:'<i class="fa fa-bold"></i>',italic:'<i class="fa fa-italic"></i>',underline:'<i class="fa fa-underline"></i>',superscript:'<i class="fa fa-superscript"></i>',subscript:'<i class="fa fa-subscript"></i>',anchor:'<i class="fa fa-link"></i>',image:'<i class="fa fa-picture-o"></i>',quote:'<i class="fa fa-quote-right"></i>',orderedlist:'<i class="fa fa-list-ol"></i>',unorderedlist:'<i class="fa fa-list-ul"></i>',pre:'<i class="fa fa-code fa-lg"></i>',indent:'<i class="fa fa-indent"></i>',outdent:'<i class="fa fa-outdent"></i>'}:"object"==typeof e&&(t=e),"object"==typeof t)for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);return o},toolbarTemplate:function(){var e,t,i=this.options.buttons,o='<ul id="medium-editor-toolbar-actions" class="medium-editor-toolbar-actions clearfix">';for(e=0;e<i.length;e+=1)t=this.buttonTemplate(i[e]),t&&(o+=t);return o+='</ul><div class="medium-editor-toolbar-form-anchor" id="medium-editor-toolbar-form-anchor">    <input type="text" value="" placeholder="'+this.options.anchorInputPlaceholder+'">    <a href="#">&times;</a></div>'},initToolbar:function(){return this.toolbar?this:(this.toolbar=this.createToolbar(),this.keepToolbarAlive=!1,this.anchorForm=this.toolbar.querySelector(".medium-editor-toolbar-form-anchor"),this.anchorInput=this.anchorForm.querySelector("input"),this.toolbarActions=this.toolbar.querySelector(".medium-editor-toolbar-actions"),this.anchorPreview=this.createAnchorPreview(),this)},createToolbar:function(){var e=t.createElement("div");return e.id="medium-editor-toolbar-"+this.id,e.className="medium-editor-toolbar",e.innerHTML=this.toolbarTemplate(),t.getElementsByTagName("body")[0].appendChild(e),e},bindSelect:function(){var e,i=this,o="";for(this.checkSelectionWrapper=function(e){return e&&i.clickingIntoArchorForm(e)?!1:(clearTimeout(o),void(o=setTimeout(function(){i.checkSelection()},i.options.delay)))},t.documentElement.addEventListener("mouseup",this.checkSelectionWrapper),e=0;e<this.elements.length;e+=1)this.elements[e].addEventListener("keyup",this.checkSelectionWrapper),this.elements[e].addEventListener("blur",this.checkSelectionWrapper);return this},checkSelection:function(){var t,i;return this.keepToolbarAlive===!0||this.options.disableToolbar||(t=e.getSelection(),""===t.toString().trim()||this.options.allowMultiParagraphSelection===!1&&this.hasMultiParagraphs()?this.hideToolbarActions():(i=this.getSelectionElement(),!i||i.getAttribute("data-disable-toolbar")?this.hideToolbarActions():this.checkSelectionElement(t,i))),this},clickingIntoArchorForm:function(e){var t=this;return e.type&&"blur"===e.type.toLowerCase()&&e.relatedTarget&&e.relatedTarget===t.anchorInput?!0:!1},hasMultiParagraphs:function(){var e=a().replace(/<[\S]+><\/[\S]+>/gim,""),t=e.match(/<(p|h[0-6]|blockquote)>([\s\S]*?)<\/(p|h[0-6]|blockquote)>/g);return t?t.length:0},checkSelectionElement:function(e,t){var i;for(this.selection=e,this.selectionRange=this.selection.getRangeAt(0),i=0;i<this.elements.length;i+=1)if(this.elements[i]===t)return void this.setToolbarButtonStates().setToolbarPosition().showToolbarActions();this.hideToolbarActions()},getSelectionElement:function(){var t,i=e.getSelection(),o=i.getRangeAt(0),n=o.commonAncestorContainer,r=n.parentNode,a=function(e){var t=e;try{for(;!t.getAttribute("data-medium-element");)t=t.parentNode}catch(i){return!1}return t};try{t=n.getAttribute("data-medium-element")?n:a(r)}catch(s){t=a(r)}return t},setToolbarPosition:function(){var t=50,i=e.getSelection(),o=i.getRangeAt(0),n=o.getBoundingClientRect(),r=this.options.diffLeft-this.toolbar.offsetWidth/2,a=(n.left+n.right)/2,s=this.toolbar.offsetWidth/2;return n.top<t?(this.toolbar.classList.add("medium-toolbar-arrow-over"),this.toolbar.classList.remove("medium-toolbar-arrow-under"),this.toolbar.style.top=t+n.bottom-this.options.diffTop+e.pageYOffset-this.toolbar.offsetHeight+"px"):(this.toolbar.classList.add("medium-toolbar-arrow-under"),this.toolbar.classList.remove("medium-toolbar-arrow-over"),this.toolbar.style.top=n.top+this.options.diffTop+e.pageYOffset-this.toolbar.offsetHeight+"px"),this.toolbar.style.left=s>a?r+s+"px":e.innerWidth-a<s?e.innerWidth+r-s+"px":r+a+"px",this.hideAnchorPreview(),this},setToolbarButtonStates:function(){var e,t=this.toolbarActions.querySelectorAll("button");for(e=0;e<t.length;e+=1)t[e].classList.remove("medium-editor-button-active");return this.checkActiveButtons(),this},checkActiveButtons:function(){var e=this.selection.anchorNode;for(e.tagName||(e=this.selection.anchorNode.parentNode);void 0!==e.tagName&&-1===this.parentElements.indexOf(e.tagName.toLowerCase);)this.activateButton(e.tagName.toLowerCase()),e=e.parentNode},activateButton:function(e){var t=this.toolbar.querySelector('[data-element="'+e+'"]');null!==t&&-1===t.className.indexOf("medium-editor-button-active")&&(t.className+=" medium-editor-button-active")},bindButtons:function(){var e,t=this.toolbar.querySelectorAll("button"),i=this,o=function(e){e.preventDefault(),e.stopPropagation(),void 0===i.selection&&i.checkSelection(),this.className.indexOf("medium-editor-button-active")>-1?this.classList.remove("medium-editor-button-active"):this.className+=" medium-editor-button-active",i.execAction(this.getAttribute("data-action"),e)};for(e=0;e<t.length;e+=1)t[e].addEventListener("click",o);return this.setFirstAndLastItems(t),this},setFirstAndLastItems:function(e){return e[0].className+=" medium-editor-button-first",e[e.length-1].className+=" medium-editor-button-last",this},execAction:function(i,o){i.indexOf("append-")>-1?(this.execFormatBlock(i.replace("append-","")),this.setToolbarPosition(),this.setToolbarButtonStates()):"anchor"===i?this.triggerAnchorAction(o):"image"===i?t.execCommand("insertImage",!1,e.getSelection()):(t.execCommand(i,!1,null),this.setToolbarPosition())},triggerAnchorAction:function(){return"a"===this.selection.anchorNode.parentNode.tagName.toLowerCase()?t.execCommand("unlink",!1,null):"block"===this.anchorForm.style.display?this.showToolbarActions():this.showAnchorForm(),this},execFormatBlock:function(e){var i=this.getSelectionData(this.selection.anchorNode);if("blockquote"===e&&i.el&&"blockquote"===i.el.parentNode.tagName.toLowerCase())return t.execCommand("outdent",!1,null);if(i.tagName===e&&(e="p"),this.isIE){if("blockquote"===e)return t.execCommand("indent",!1,e);e="<"+e+">"}return t.execCommand("formatBlock",!1,e)},getSelectionData:function(e){var t;for(e&&e.tagName&&(t=e.tagName.toLowerCase());e&&-1===this.parentElements.indexOf(t);)e=e.parentNode,e&&e.tagName&&(t=e.tagName.toLowerCase());return{el:e,tagName:t}},getFirstChild:function(e){for(var t=e.firstChild;null!==t&&1!==t.nodeType;)t=t.nextSibling;return t},hideToolbarActions:function(){this.keepToolbarAlive=!1,this.toolbar.classList.remove("medium-editor-toolbar-active")},showToolbarActions:function(){var e,t=this;this.anchorForm.style.display="none",this.toolbarActions.style.display="block",this.keepToolbarAlive=!1,clearTimeout(e),e=setTimeout(function(){t.toolbar.classList.contains("medium-editor-toolbar-active")||t.toolbar.classList.add("medium-editor-toolbar-active")},100)},showAnchorForm:function(e){this.toolbarActions.style.display="none",this.savedSelection=o(),this.anchorForm.style.display="block",this.keepToolbarAlive=!0,this.anchorInput.focus(),this.anchorInput.value=e||""},bindAnchorForm:function(){var e=this.anchorForm.querySelector("a"),t=this;return this.anchorForm.addEventListener("click",function(e){e.stopPropagation()}),this.anchorInput.addEventListener("keyup",function(e){13===e.keyCode&&(e.preventDefault(),t.createLink(this))}),this.anchorInput.addEventListener("click",function(e){e.stopPropagation(),t.keepToolbarAlive=!0}),this.anchorInput.addEventListener("blur",function(){t.keepToolbarAlive=!1,t.checkSelection()}),e.addEventListener("click",function(e){e.preventDefault(),t.showToolbarActions(),n(t.savedSelection)}),this},hideAnchorPreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active")},showAnchorPreview:function(t){if(this.anchorPreview.classList.contains("medium-editor-anchor-preview-active"))return!0;var i,o,n,r=this,a=40,s=t.getBoundingClientRect(),l=(s.left+s.right)/2;return r.anchorPreview.querySelector("i").innerHTML=t.href,i=r.anchorPreview.offsetWidth/2,o=r.options.diffLeft-i,clearTimeout(n),n=setTimeout(function(){r.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||r.anchorPreview.classList.add("medium-editor-anchor-preview-active")},100),r.observeAnchorPreview(t),r.anchorPreview.classList.add("medium-toolbar-arrow-over"),r.anchorPreview.classList.remove("medium-toolbar-arrow-under"),r.anchorPreview.style.top=Math.round(a+s.bottom-r.options.diffTop+e.pageYOffset-r.anchorPreview.offsetHeight)+"px",r.anchorPreview.style.left=i>l?o+i+"px":e.innerWidth-l<i?e.innerWidth+o-i+"px":o+l+"px",this},observeAnchorPreview:function(e){var t=this,i=(new Date).getTime(),o=!0,n=function(){i=(new Date).getTime(),o=!0},r=function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(o=!1)},a=setInterval(function(){if(o)return!0;var s=(new Date).getTime()-i;s>t.options.anchorPreviewHideDelay&&(t.hideAnchorPreview(),clearInterval(a),t.anchorPreview.removeEventListener("mouseover",n),t.anchorPreview.removeEventListener("mouseout",r),e.removeEventListener("mouseover",n),e.removeEventListener("mouseout",r))},200);t.anchorPreview.addEventListener("mouseover",n),t.anchorPreview.addEventListener("mouseout",r),e.addEventListener("mouseover",n),e.addEventListener("mouseout",r)},createAnchorPreview:function(){var e=this,i=t.createElement("div");return i.id="medium-editor-anchor-preview-"+this.id,i.className="medium-editor-anchor-preview",i.innerHTML=this.anchorPreviewTemplate(),t.getElementsByTagName("body")[0].appendChild(i),i.addEventListener("click",function(){e.anchorPreviewClickHandler()}),i},anchorPreviewTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <i class="medium-editor-toolbar-anchor-preview-inner">http://google.com/</i></div>'},anchorPreviewClickHandler:function(){if(this.activeAnchor){var i=this,o=t.createRange(),n=e.getSelection();o.selectNodeContents(i.activeAnchor),n.removeAllRanges(),n.addRange(o),setTimeout(function(){i.showAnchorForm(i.activeAnchor.href),i.keepToolbarAlive=!1},100+i.options.delay)}this.hideAnchorPreview()},editorAnchorObserver:function(e){var t=this,i=!0,o=function(){i=!1,t.activeAnchor.removeEventListener("mouseout",o)};if(e.target&&"a"===e.target.tagName.toLowerCase()){if(this.toolbar.classList.contains("medium-editor-toolbar-active"))return!0;this.activeAnchor=e.target,this.activeAnchor.addEventListener("mouseout",o),setTimeout(function(){i&&t.showAnchorPreview(e.target)},t.options.delay)}},bindAnchorPreview:function(e){var t=this;return this.elements[e].addEventListener("mouseover",function(e){t.editorAnchorObserver(e)}),this},setTargetBlank:function(){var e,t=r();if("a"===t.tagName.toLowerCase())t.target="_blank";else for(t=t.getElementsByTagName("a"),e=0;e<t.length;e+=1)t[e].target="_blank"},createLink:function(e){n(this.savedSelection),t.execCommand("createLink",!1,e.value),this.options.targetBlank&&this.setTargetBlank(),this.showToolbarActions(),e.value=""},bindWindowActions:function(){var t,i=this;return this.windowResizeHandler=function(){clearTimeout(t),t=setTimeout(function(){i.toolbar&&i.toolbar.classList.contains("medium-editor-toolbar-active")&&i.setToolbarPosition()},100)},e.addEventListener("resize",this.windowResizeHandler),this},activate:function(){var e;if(!this.isActive){for(void 0!==this.toolbar&&(this.toolbar.style.display="block"),this.isActive=!0,e=0;e<this.elements.length;e+=1)this.elements[e].setAttribute("contentEditable",!0);this.bindWindowActions().bindSelect()}},deactivate:function(){var i;if(this.isActive)for(this.isActive=!1,void 0!==this.toolbar&&(this.toolbar.style.display="none"),t.documentElement.removeEventListener("mouseup",this.checkSelectionWrapper),e.removeEventListener("resize",this.windowResizeHandler),i=0;i<this.elements.length;i+=1)this.elements[i].removeEventListener("keyup",this.checkSelectionWrapper),this.elements[i].removeEventListener("blur",this.checkSelectionWrapper),this.elements[i].removeEventListener("paste",this.pasteWrapper),this.elements[i].removeAttribute("contentEditable")},bindPaste:function(){var e,i=this;for(this.pasteWrapper=function(e){var o,n,r="";if(this.classList.remove("medium-editor-placeholder"),!i.options.forcePlainText)return this;if(e.clipboardData&&e.clipboardData.getData&&!e.defaultPrevented)if(e.preventDefault(),i.options.disableReturn)t.execCommand("insertHTML",!1,e.clipboardData.getData("text/plain"));else{for(o=e.clipboardData.getData("text/plain").split(/[\r\n]/g),n=0;n<o.length;n+=1)""!==o[n]&&(r+="<p>"+o[n]+"</p>");t.execCommand("insertHTML",!1,r)}},e=0;e<this.elements.length;e+=1)this.elements[e].addEventListener("paste",this.pasteWrapper);return this},setPlaceholders:function(){var e,t=function(e){""===e.textContent.replace(/^\s+|\s+$/g,"")&&e.classList.add("medium-editor-placeholder")},i=function(e){this.classList.remove("medium-editor-placeholder"),"keypress"!==e.type&&t(this)};for(e=0;e<this.elements.length;e+=1)t(this.elements[e]),this.elements[e].addEventListener("blur",i),this.elements[e].addEventListener("keypress",i);return this}}}(window,document);
!function(t,o){o.Editor=o.Editor||function(o){this.options={textarea:".js-text-box"},o&&t.extend(this.options,o)},Editor.prototype.attachEditor=function(o){var i=t(o);if(!i.data("editor")){var a=t('<div class="editor js-editor"></div>');i.after(a);var e=new MediumEditor(a[0],{placeholder:"Awaiting orders!"});a.html(i.val()),a.html()&&a.removeClass("medium-editor-placeholder"),a.on("input",function(){i.val(a.html())}),i.data("editor",e),i.data("contentEditable",a),i.addClass("Hidden")}},Editor.prototype.attachEditorHandler=function(){var o=this;t(this.options.textarea).each(function(){o.attachEditor(this)})},Editor.prototype.clearEditor=function(o){var i=t(o).data("contentEditable");i.empty()},Editor.prototype.clearEditorHandler=function(o){var i=this;t(this.options.textarea,o.target).each(function(){i.clearEditor(this)})}}(jQuery,window,document);
!function(o,n,e){var r=["ready","EditCommentFormLoaded"],t=["clearCommentForm"],d=new Editor({textarea:".TextBox"});o(e).on(r.join(" "),d.attachEditorHandler.bind(d)).on(t.join(" "),d.clearEditorHandler.bind(d)),o.fn.autogrow=o.noop}(jQuery,window,document);